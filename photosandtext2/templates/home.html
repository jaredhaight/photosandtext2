{% extends "base.html" %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.justifiedgallery.css') }}">
{% endblock %}

{% block title %}Home{% endblock %}

{% block header %}
<h1>PhotosandText2</h1>
{% endblock %}

{% block content %}
  <section id="gallery-wrap">
    <div id="gallery-wrap" class="row">
      <div id="gallery">
        {% for gallery in galleries %}
          {% set photo = gallery.photos.first() %}
          {% set crop = photo.crops.filter_by(name="display").first() %}
          <a href="{{ url_for('gallery_view', gallery_id=gallery.id) }}">
             <img src="{{ crop.url() }}">
          </a>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}

{% block javascript %}
<script src="{{ url_for('static', filename="js/jquery.justifiedgallery.js") }}"></script>
<script>
$(window).load(function () {
  $(document ).ready(function() {
   $("#gallery").justifiedGallery({
      rowHeight: 300,
      justifyLastRow: false,
      captions: false
    });
  });
});
/*
$(window).load(function () {
  $( document ).ready(function() {
   $('.gallery').collagePlus({
      'targetHeight':200,
      'allowPartialLastRow': true,
      'direction':'horizontal'
    });
  });
});
*/
</script>
{% endblock %}