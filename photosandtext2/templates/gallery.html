{% extends "base.html" %}
{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.justifiedgallery.css') }}">
{% endblock %}
{% block title %}{{ gallery.name }}{% endblock %}

{% block header %}
<div class="row">
  <div class="small-12 medium-4 large-3 columns">
    <h1><a href="/">Photos and Text</a></h1>
  </div>
  <div class="small-12 medium-4 large-6 columns text-center">
    <h1>{{ gallery.name }}</h1>
  </div>
  <div class="small-12 medium-4 large-3 columns text-right show-for-medium-up">
    <h1><a href="#">Details</a></h1>
  </div>
</div>

{% endblock %}

{% block content %}
  <section>
  <div class="row">
    <div class="small-12 medium-6 columns medium-centered text-center">
      <p>{{ gallery.description }}</p>
    </div>
  </div>
  </section>
  <section id="galleryWrap">
    <div class="row">
      <div id="gallery">
        {% for photo in gallery.photos %}
          {% set crop = photo.crops.filter_by(name="display").first() %}
          <a href="{{ url_for('photo_view', photo_id=photo.id) }}">
             <img src="{{ crop.url() }}">
          </a>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}

{% block javascript %}
<script src="{{ url_for('static', filename="js/jquery.justifiedgallery.js") }}"></script>
<script>
$("#gallery").justifiedGallery({
  rowHeight: 300,
  justifyLastRow: false,
  captions: false
});
</script>
<!--
<script src="{{ url_for('static', filename="js/freewall.js") }}"></script>
<script>
$(window).load(function () {
  $(document ).ready(function() {
    var wall = new freewall("#gallery");
    wall.reset({
      selector: '.crop',
      animate: false,
      cellW: 300,
      cellH: 125,
      onResize: function() {
        wall.fitWidth();
      }
    });
    wall.fitWidth();
  });
});
/*
$(window).load(function () {
  $( document ).ready(function() {
   $('.gallery').collagePlus({
      'targetHeight':200,
      'allowPartialLastRow': true,
      'direction':'horizontal'
    });
  });
});
*/
</script>
-->
{% endblock %}